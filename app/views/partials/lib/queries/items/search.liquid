{% parse_json sort_options %}
{
   "price_desc": { "properties": { "name": "price", "order": "DESC" }},
   "price_asc": { "properties": { "name": "price", "order": "ASC" }},
   "name_desc": { "properties": { "name": "name", "order": "DESC" }},
   "name_asc": { "properties": { "name": "name", "order": "ASC" }},
   "created_at_desc": { "created_at": { "order": "DESC" }},
   "created_at_asc": { "created_at": { "order": "ASC" }}
}
{% endparse_json %}

{% parse_json query %}
{
  "limit": {{ limit | default: 20 }},
  "keyword": {{ query.k | json }},
  "tag": {{ query.tag | json }},
  "sort": {{ sort_options[query.sort] | json }},
  "category": {{ query.category | json }}
}
{% endparse_json %}

{% liquid
  graphql items = 'items/search', args: query | fetch: 'items'

  export query, namespace: "search"
  export items
%}
